#include "WebData.h"

String WebDataWiFiSetupIndex() {
	return F("<!DOCTYPE html><html lang=\"ja\"><head><meta charset=\"utf-8\"><title></title><meta name=\"viewport\" content=\"width=1000\"><style type=\"text/css\">body{font-size:16px;font-family:sans-serif}button{display:inline-block;font-size:1rem;padding:0.5em 1em;margin:5px 0 5px 0;text-decoration:none;background:#f7f7f7;border-left:solid 6px #000000;color:#000000;font-weight:bold;box-shadow:0px 2px 2px rgba(0,0,0,0.29);border-radius:5px}.bt_blue{border-left:solid 6px #0000FF;color:#0000FF}.bt_red{border-left:solid 6px #FF0000;color:#FF0000}.bt_brown{border-left:solid 6px #990000;color:#990000}.bt_green{border-left:solid 6px #009900;color:#009900}button:disabled{color:#666666;border-left:solid 6px #666666;box-shadow:none}button:active{box-shadow:inset 0 0 2px rgba(128,128,128,0.1);transform:translateY(2px)}.container{width:1000px;margin:10px auto;padding:20px 20px;border:1px solid #DDDDDD;border-radius:0px}.panel_top{width:968px;clear:both;padding:10px;margin:5px;border:1px solid #AAAAAA}.panel_top h1{padding:2px;margin:0px;font-weight:bold;font-size:2rem}.panel_left{width:200px;border:1px solid #AAAAAA;float:left;padding:10px;margin:5px}.panel_left h1{padding:2px;margin:0px;background-color:#EEEEEE;font-size:1.2rem;font-weight:normal;text-align:center}.panel_left button{width:100%}.panel_left .commit{background-color:#FFEEEE;margin:10px 0 10px 0}.panel_left .commit p{padding:10px 0 10px 0}.panel_left p{padding:2px;margin:0px;font-size:1rem;font-weight:normal;text-align:center}.panel_center{width:730px;float:right;padding:10px;margin:5px}.panel_bottom{width:968px;clear:both;padding:10px;margin:5px;border:1px solid #AAAAAA;text-align:right}.panel_bottom small{color:#999999}.panel_center button{width:150px;margin:0 10px 0 10px}.panel_center td button{width:100px;margin:0 10px 0 10px}h1{padding:10px;font-size:2rem}h2{padding:10px;font-size:1rem}h3{font-size:0.9rem}h4{font-size:0.8rem}blockquote{background-color:#F4F4F4;padding:5px}table{border-collapse:collapse;margin:20px 0px}table th{border:1px solid #DDDDDD;background-color:#EEEEEE;padding:5px 20px}table td{border:1px solid #DDDDDD;padding:5px 20px}#m_wifi{display:none}#d_ap_scan_now{animation:d_ap_scan_now_a 0.2s infinite alternate}@keyframes d_ap_scan_now_a{0%{color:#FFFFFF}100%{color:#000000}}</style><script type=\"text/javascript\">// <![CDATA[\n!function(t){var n={};function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&n&&\"string\"!=typeof t)for(var s in t)e.d(i,s,function(n){return t[n]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p=\"\",e(e.s=0)}([function(t,n,e){\"use strict\";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}e.r(n);var s=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.w=n,this.d=this.w.document,this.events=[],this.layout={}}var n,e,s;return n=t,(e=[{key:\"layout_setting\",value:function(t){t&&(this.layout=t)}},{key:\"reset\",value:function(){for(var t in this.layout.hide)this.hide(this.layout.hide[t]);for(var n in this.layout.show)this.show(this.layout.show[n]);return this.clear_events(),this}},{key:\"id\",value:function(t){return this.d.getElementById(t)}},{key:\"show\",value:function(t){return console.log(\"show:\"+t),this.id(t).style.display=\"block\",this}},{key:\"hide\",value:function(t){return console.log(\"hide:\"+t),this.id(t).style.display=\"none\",this}},{key:\"enable\",value:function(t){this.id(t).disabled=!1}},{key:\"disable\",value:function(t){this.id(t).disabled=!0}},{key:\"json\",value:function(t,n){return new Promise((function(e,i){var s=new XMLHttpRequest;if(n?(console.log(\"Fetch(POST): \",t),s.open(\"POST\",t,!0),s.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded; charset=UTF-8\")):(console.log(\"Fetch(GET): \",t),s.open(\"GET\",t,!0)),s.onload=function(){this.status>=200&&this.status<400?e(JSON.parse(this.response)):i()},n){var o=[];for(var u in n){var a=n[u],r=encodeURIComponent(u)+\"=\"+encodeURIComponent(a);o.push(r)}var c=o.join(\"&\").replace(/%20/g,\"+\");s.send(c)}else s.send()}))}}])&&i(n.prototype,e),s&&i(n,s),t}();function o(t,n,e){return(o=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var i=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=r(t)););return t}(t,n);if(i){var s=Object.getOwnPropertyDescriptor(i,n);return s.get?s.get.call(e):s.value}})(t,n,e||t)}function u(t){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function a(t,n){return!n||\"object\"!==u(n)&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):n}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&h(t,n)}function h(t,n){return(h=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function f(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function l(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,n,e){return n&&l(t.prototype,n),e&&l(t,e),t}var p=function(){function t(n){f(this,t),this.u=n,this.events=[]}return d(t,[{key:\"click\",value:function(t,n){var e=this.u.id(t);return e.addEventListener(\"click\",n),this.events.push([e,\"click\",n]),this}},{key:\"clear\",value:function(){for(var t in this.events){var n=this.events[t];n[0].removeEventListener(n[1],n[2])}return this.events=[],this}}]),t}(),v=function(){function t(n){var e=this;f(this,t),this.stash=n.stash,this.reset=function(){return n.reset(),e},this.u=n.u,this.ev=new p(this.u)}return d(t,[{key:\"show\",value:function(t){return this.number=t,this.reset().render().events(),this.u.show(this.ids[0]),this}},{key:\"hide\",value:function(){for(var t in this.ids)this.u.hide(this.ids[t]);this.ev.clear()}},{key:\"render\",value:function(){return this}},{key:\"events\",value:function(){return this}}]),t}(),b=function(t){function n(t){var e;return f(this,n),(e=a(this,r(n).call(this,t))).ids=[\"d_ap_list\"],e.cb={edit:function(t){}},e}return c(n,t),d(n,[{key:\"load\",value:function(){var t=this;console.log(\"APList load\"),this.u.json(\"/api/ap/list\").then((function(n){for(var e in n.data)t.stash.ap[e]={ssid:n.data[e].ssid,passphase:\"\",update:!1}})).then((function(){return t.cb.committable(!1),t.show()}))}},{key:\"events\",value:function(){var t=this;for(var n in this.stash.ap)!function(n){t.ev.click(\"b_ap_setup_\"+n,(function(e){t.cb.edit(n)}))}(n);return this}},{key:\"render\",value:function(){var t=\"<tr><td>番号</td><td>SSID</td><td>　</td></tr>\",n=!1;for(var e in this.stash.ap){var i=this.stash.ap[e];t=t+\"<tr><td>\"+(new Number(e)+1)+\"</td>\"+(i.update?'<td style=\"background-color:#FFFFAA\">':\"<td>\")+i.ssid+'</td><td><button id=\"b_ap_setup_'+e+'\" class=\"bt_blue\">設定</button></td>',i.update&&(n=!0)}return n&&this.cb.committable(!0),this.u.id(\"t_ap_list\").innerHTML=t,this}}]),n}(v),_=function(t){function n(t){var e;return f(this,n),(e=a(this,r(n).call(this,t))).ids=[\"d_ap_info\"],e.cb={back:function(){},scan:function(t){},apply:function(){}},e}return c(n,t),d(n,[{key:\"render\",value:function(){return this.u.id(\"s_ap_info_num\").innerHTML=new Number(this.number)+1,this.u.id(\"t_ap_info_ssid\").value=this.stash.ap[this.number].ssid,this.u.id(\"t_ap_info_passphase\").value=this.stash.ap[this.number].passphase,this}},{key:\"apply\",value:function(t){return this.reset().render().events(),this.u.id(\"t_ap_info_ssid\").value=t,this.u.show(this.ids[0]),this}},{key:\"events\",value:function(){var t=this;return this.ev.click(\"b_ap_info_back\",(function(){t.cb.back()})),this.ev.click(\"b_ap_info_scan\",(function(){t.cb.scan(t.number)})),this.ev.click(\"b_ap_info_commit\",(function(){var n=t.u.id(\"t_ap_info_ssid\").value,e=t.u.id(\"t_ap_info_passphase\").value;t.stash.ap[t.number]={ssid:n,passphase:e,update:!0},t.cb.apply()})),this}}]),n}(v),y=function(t){function n(t){var e;return f(this,n),(e=a(this,r(n).call(this,t))).ids=[\"d_ap_scan\",\"d_ap_scan_now\"],e.cb={back:function(){},apply:function(){}},e.d={},e}return c(n,t),d(n,[{key:\"fetch\",value:function(){var t=this;return new Promise((function(n,e){t.u.json(\"/api/ap/scan\",{fetch:1}).then((function(){setTimeout((function(){t.u.json(\"/api/ap/scan\").then((function(e){t.d=e.data,n()})).catch((function(t){e(t)}))}),1e3)})).catch((function(t){e(t)}))}))}},{key:\"show\",value:function(t){var n=this;return this.number=t,this.u.id(\"s_ap_scan_num\").innerHTML=new Number(t)+1,this.reset(),this.u.show(\"d_ap_scan_now\"),this.fetch().then((function(){n.reset().render().events(),n.u.hide(\"d_ap_scan_now\").show(n.ids[0])})),this}},{key:\"render\",value:function(){var t=\"<tr><td>SSID</td><td>Ch.</td><td>RSSI</td><td></td></tr>\";for(var n in this.d.sort((function(t,n){return n.rssi-t.rssi})),this.d){var e=this.d[n];t=t+\"<tr><td>\"+e.ssid+\"</td><td>\"+e.channel+\"</td><td>\"+e.rssi+'dB</td><td><button id=\"t_ap_scan_sel_'+n+'\" class=\"bt_blue\">選択</button></td>'}return this.u.id(\"t_ap_scan\").innerHTML=t,this}},{key:\"events\",value:function(){var t=this;for(var n in this.d)!function(n){t.ev.click(\"t_ap_scan_sel_\"+n,(function(e){t.cb.apply(t.d[n].ssid)}))}(n);this.ev.click(\"b_ap_scan_back\",(function(){t.cb.back(t.number)}))}}]),n}(v),m=function(t){function n(t){var e;return f(this,n),(e=a(this,r(n).call(this,t))).ids=[\"d_ap_commit\"],e.cb={cancel:function(){},apply:function(){}},e.evb=new p(e.u),e.committable(!1),e}return c(n,t),d(n,[{key:\"committable\",value:function(t){t?this.show_buttons():this.hide_buttons()}},{key:\"show_buttons\",value:function(){var t=this;this.evb.click(\"b_commit\",(function(){t.commit()})),this.evb.click(\"b_cancel\",(function(){t.cb.cancel()})),this.u.show(\"p_commit\")}},{key:\"hide_buttons\",value:function(){this.evb.clear(),this.u.hide(\"p_commit\")}},{key:\"commit\",value:function(){var t={};for(var n in this.stash.ap)t[\"ssid\"+n]=this.stash.ap[n].ssid,t[\"passphase\"+n]=this.stash.ap[n].passphase,t[\"update\"+n]=this.stash.ap[n].update?1:0;this.u.json(\"/api/ap/config\",t),this.show()}},{key:\"show\",value:function(){o(r(n.prototype),\"show\",this).call(this),this.u.hide(\"p_commit\"),this.cb.apply()}}]),n}(v),w=function(){function t(n){f(this,t),this.u=n,this.stash={ap:[]},this.ev=new p(this.u)}return d(t,[{key:\"button\",value:function(t){var n=this,e=\"btc_wifi\";t?(this.ev.click(e,(function(){n.show()})),this.u.enable(e)):(this.u.disable(e),this.ev.clear())}},{key:\"show\",value:function(){var t=this,n={u:this.u,stash:this.stash,reset:function(){t.reset()}},e={list:new b(n),info:new _(n),scan:new y(n),commit:new m(n)};e.list.cb={edit:function(t){e.info.show(t)},committable:function(t){e.commit.committable(t)}},e.info.cb={back:function(){e.list.show()},scan:function(t){e.scan.show(t)},apply:function(){e.list.show()}},e.scan.cb={back:function(t){e.info.show(t)},apply:function(t){e.info.apply(t)}},e.commit.cb={cancel:function(){e.list.load()},apply:function(){t.button(!0)}},e.list.load(),this.pa=e,this.button(!1),this.reset(),this.u.show(\"m_wifi\"),this.data_pane(),setInterval((function(){t.data_pane()}),1e4)}},{key:\"hide\",value:function(){this.reset(),this.u.enable(\"btc_wifi\"),this.u.hide(\"w_wifi\")}},{key:\"reset\",value:function(){for(var t in this.pa)this.pa[t].hide()}},{key:\"data_pane\",value:function(){var t=this,n=function(n,e){e=e||\"---\",t.u.id(n).innerHTML=e};this.u.json(\"/api/ap/info\").then((function(t){n(\"dp_hostname\",t.hostname),n(\"dp_ap_ssid\",t.ap.ssid),n(\"dp_ap_ip\",t.ap.ip),n(\"dp_sta_ssid\",t.sta.ssid),n(\"dp_sta_ip\",t.sta.ip)}))}}]),t}(),k=function(){function t(n){f(this,t),this.u=new s(n),this.wifi=new w(this.u)}return d(t,[{key:\"run\",value:function(){this.wifi.show()}}]),t}();document.addEventListener(\"DOMContentLoaded\",(function(){new s(window).json(\"/api/page\").then((function(t){(t.page=\"index\")&&new k(window).run()}))}))}]);\n// ]]></script></head><body><div class=\"container\"><div class=\"panel_top\"><h1>ESP-WROOM-02 設定</h1></div><div class=\"panel_left\"><div class=\"commit\" id=\"p_commit\"><p>適用ボタンを押すまで<br>反映されません</p><button id=\"b_commit\" class=\"bt_red\">適用</button> <button id=\"b_cancel\">キャンセル</button></div><h1>ホスト名</h1><p><span id=\"dp_hostname\">---</span></p><h1>AP SSID</h1><p><span id=\"dp_ap_ssid\">---</span></p><h1>AP IP</h1><p><span id=\"dp_ap_ip\">---</span></p><h1>STA SSID</h1><p><span id=\"dp_sta_ssid\">---</span></p><h1>STA IP</h1><p><span id=\"dp_sta_ip\">---</span></p><hr><button class=\"bt_blue\" id=\"btc_wifi\" disabled=\"disabled\">WiFi設定</button> <button class=\"bt_blue\" id=\"btc_config\" disabled=\"disabled\">動作設定</button> <button class=\"bt_brown\">リセット</button></div><div class=\"panel_center\"><div id=\"m_wifi\"><h1>WiFI設定</h1><div id=\"d_ap_list\"><h2>アクセスポイントの設定</h2><table id=\"t_ap_list\"></table></div><div id=\"d_ap_info\"><h2>アクセスポイントの設定 → <span id=\"s_ap_info_num\"></span></h2><table><tr><td>SSID</td><td><input type=\"text\" id=\"t_ap_info_ssid\" size=\"32\" maxlength=\"64\"></td></tr><tr><td>パスフレーズ</td><td><input type=\"text\" id=\"t_ap_info_passphase\" size=\"64\" maxlength=\"64\"></td></tr></table><button id=\"b_ap_info_back\">戻る</button> <button id=\"b_ap_info_scan\" class=\"bt_green\">スキャン</button> <button id=\"b_ap_info_commit\" class=\"bt_blue\">設定</button></div><div id=\"d_ap_scan_now\"><p><blink>ただいまスキャン中！</blink></p></div><div id=\"d_ap_scan\"><h2>アクセスポイントの設定 → <span id=\"s_ap_scan_num\"></span> → スキャン</h2><p>電波の強い順番です</p><table id=\"t_ap_scan\"></table><button id=\"b_ap_scan_back\">戻る</button></div><div id=\"d_ap_commit\"><p>設定完了</p></div></div></div><div class=\"panel_bottom\"><small>&copy; mamemo technologies.</small></div></div></body></html>");
}
