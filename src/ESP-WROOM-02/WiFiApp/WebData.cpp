#include "WebData.h"

String WebDataWiFiSetupIndex() {
	return F("<!DOCTYPE html><html lang=\"ja\"><head><meta charset=\"utf-8\"><title></title><meta name=\"viewport\" content=\"width=1000\"><style type=\"text/css\">body{font-size:1rem;font-family:sans-serif}.container{width:-20px;margin:10px auto;padding:20px 20px;border:1px solid #DDDDDD;border-radius:0px}button{display:inline-block;font-size:1rem;padding:0.5em 1em;margin:5px 0 5px 0;text-decoration:none;background:#f7f7f7;border-left:solid 6px #000000;color:#000000;font-weight:bold;box-shadow:0px 2px 2px rgba(0,0,0,0.29);border-radius:5px}.bt_blue{border-left:solid 6px #0000FF;color:#0000FF}.bt_red{border-left:solid 6px #FF0000;color:#FF0000}.bt_brown{border-left:solid 6px #990000;color:#990000}.bt_green{border-left:solid 6px #009900;color:#009900}button:disabled{color:#666666;border-left:solid 6px #666666;box-shadow:none}button:active{box-shadow:inset 0 0 2px rgba(128,128,128,0.1);transform:translateY(2px)}.panel_top{width:-20px;clear:both;padding:10px;margin:5px}.panel_top h1{padding:2px;margin:0px;font-weight:bold;font-size:2rem}.panel_left{width:200px;border:1px solid #AAAAAA;float:left;padding:5px;margin:0 5px 10px 5px}.panel_left h1{padding:2px;margin:0px;background-color:#EEEEEE;font-size:1.2rem;font-weight:normal;text-align:center}.panel_left button{width:100%}.panel_left .commit{background-color:#FFEEEE;margin:10px 0 10px 0;display:none}.panel_left .commit p{padding:10px 0 10px 0}.panel_left p{padding:2px;margin:0px;font-size:1rem;font-weight:normal;text-align:center}.panel_center{margin:5px 5px 5px 222px;padding:10px}.panel_center table{width:100%}.panel_center h1{font-size:1.5rem;margin:5px;padding:5px;text-align:center}.panel_center h2{font-size:1.1rem;margin:5px;padding:5px}.panel_bottom{width:-20px;clear:both;padding:10px;margin:5px;text-align:right}.panel_bottom small{color:#999999}.panel_center button{width:150px;margin:0 10px 0 10px}.panel_center td button{width:100px;margin:0 10px 0 10px}h1{padding:10px;font-size:2rem}h2{padding:10px;font-size:1rem}h3{font-size:0.9rem}h4{font-size:0.8rem}blockquote{background-color:#F4F4F4;padding:5px}table{border-collapse:collapse;margin:20px 0px}table th{border:1px solid #DDDDDD;background-color:#EEEEEE;padding:10px 20px}table td{border:1px solid #DDDDDD;padding:5px 20px;text-align:center}#m_wifi{display:none}#d_sta_scan_now p{animation:d_sta_scan_now_a 0.2s infinite alternate}@keyframes d_sta_scan_now_a{0%{color:#FFFFFF}100%{color:#000000}}</style><script type=\"text/javascript\">// <![CDATA[\n!function(t){var n={};function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&n&&\"string\"!=typeof t)for(var s in t)e.d(i,s,function(n){return t[n]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p=\"\",e(e.s=0)}([function(t,n,e){\"use strict\";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}e.r(n);var s=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.w=n,this.d=this.w.document,this.stash={}}var n,e,s;return n=t,(e=[{key:\"id\",value:function(t){return this.d.getElementById(t)}},{key:\"show\",value:function(t){return console.log(\"show:\"+t),this.id(t).style.display=\"block\",this}},{key:\"hide\",value:function(t){return console.log(\"hide:\"+t),this.id(t).style.display=\"none\",this}},{key:\"enable\",value:function(t){this.id(t).disabled=!1}},{key:\"disable\",value:function(t){this.id(t).disabled=!0}},{key:\"inner\",value:function(t,n){return n?this.id(t).innerHTML=n:n}},{key:\"json\",value:function(t,n){return new Promise((function(e,i){var s=new XMLHttpRequest;if(n?(console.log(\"Fetch(POST): \",t),s.open(\"POST\",t,!0),s.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded; charset=UTF-8\")):(console.log(\"Fetch(GET): \",t),s.open(\"GET\",t,!0)),s.onload=function(){this.status>=200&&this.status<400?e(JSON.parse(this.response)):i()},n){var o=[];for(var a in n){var r=n[a],u=encodeURIComponent(a)+\"=\"+encodeURIComponent(r);o.push(u)}var c=o.join(\"&\").replace(/%20/g,\"+\");s.send(c)}else s.send()}))}}])&&i(n.prototype,e),s&&i(n,s),t}();function o(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function a(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,n,e){return n&&a(t.prototype,n),e&&a(t,e),t}var u=function(){function t(n){o(this,t),this.ba=n,this.events=[]}return r(t,[{key:\"click\",value:function(t,n){return this.ba.id(t).addEventListener(\"click\",n),this.events.push([t,\"click\",n]),this}},{key:\"_rh\",value:function(t){this.ba.id(t[0]).removeEventListener(t[1],t[2])}},{key:\"renove\",value:function(t,n){for(var e in this.events){var i=this.events[e];i[0]==t&&i[1]==n&&this._rh(i)}}},{key:\"clear\",value:function(){for(var t in this.events)this._rh(this.events[t]);return this.events=[],this}}]),t}(),c=function(){function t(n){o(this,t),this.ba=n,this.ev=new u(n),this.cb={leave:function(){}}}return r(t,[{key:\"show\",value:function(){this.reset(),this.pages_start(),this.ba.show(this.id)}},{key:\"hide\",value:function(){this.reset(),this.ba.hide(this.id),this.cb.leave()}},{key:\"reset\",value:function(){for(var t in this.pa)this.pa[t].hide()}},{key:\"leave\",value:function(){}},{key:\"pages_start\",value:function(){}}]),t}(),h=function(){function t(n){var e=this;o(this,t),this.ba=n,this.reset=function(){return e.cb.reset(),e},this.ev=new u(n)}return r(t,[{key:\"show\",value:function(t){return this.number=t,this.reset().render().events(),this.ba.show(this.ids[0]),this}},{key:\"hide\",value:function(){for(var t in this.ids)this.ba.hide(this.ids[t]);this.ev.clear()}},{key:\"render\",value:function(){return this}},{key:\"events\",value:function(){return this}}]),t}();function f(t,n,e){return(f=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var i=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=y(t)););return t}(t,n);if(i){var s=Object.getOwnPropertyDescriptor(i,n);return s.get?s.get.call(e):s.value}})(t,n,e||t)}function l(t){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function b(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,n,e){return n&&b(t.prototype,n),e&&b(t,e),t}function v(t,n){return!n||\"object\"!==l(n)&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):n}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&m(t,n)}function m(t,n){return(m=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}new s(window);var w=function(t){function n(t){var e;return p(this,n),(e=v(this,y(n).call(this,t))).ids=[\"d_sta_list\"],e.cb={edit:function(t){}},e}return _(n,t),d(n,[{key:\"load\",value:function(){var t=this;this.ba.json(\"/api/ap/list\").then((function(n){for(var e in n.data)t.ba.stash.ap[e]={ssid:n.data[e].ssid,passphase:\"\",update:!1}})).then((function(){return t.cb.committable(!1),t.show()}))}},{key:\"events\",value:function(){var t=this;for(var n in this.ba.stash.ap)!function(n){t.ev.click(\"b_sta_setup_\"+n,(function(e){t.cb.edit(n)}))}(n);return this}},{key:\"render\",value:function(){var t='<tr><th>番号</th><th style=\"min-width:200px\">SSID</th><th>　</th></tr>',n=!1,e=this.ba.stash.ap;for(var i in e){var s=e[i];t=t+\"<tr><td>\"+(new Number(i)+1)+\"</td>\"+(s.update?'<td style=\"background-color:#FFFFAA\">':\"<td>\")+s.ssid+'</td><td><button id=\"b_sta_setup_'+i+'\" class=\"bt_blue\">設定</button></td>',s.update&&(n=!0)}return n&&this.cb.committable(!0),this.ba.inner(\"t_sta_list\",t),this}}]),n}(h),k=function(t){function n(t){var e;return p(this,n),(e=v(this,y(n).call(this,t))).ids=[\"d_sta_info\"],e.cb={back:function(){},scan:function(t){},apply:function(){}},e}return _(n,t),d(n,[{key:\"render\",value:function(){var t=this.ba.stash.ap[this.number];return this.ba.inner(\"s_sta_info_num\",new Number(this.number)+1),this.ba.id(\"t_sta_info_ssid\").value=t.ssid,this.ba.id(\"t_sta_info_passphase\").value=t.passphase,this}},{key:\"apply\",value:function(t){return this.reset().render().events(),this.ba.id(\"t_sta_info_ssid\").value=t,this.ba.show(this.ids[0]),this}},{key:\"events\",value:function(){var t=this;return this.ev.click(\"b_sta_info_back\",(function(){t.cb.back()})),this.ev.click(\"b_sta_info_scan\",(function(){t.cb.scan(t.number)})),this.ev.click(\"b_sta_info_commit\",(function(){var n=t.ba.id(\"t_sta_info_ssid\").value,e=t.ba.id(\"t_sta_info_passphase\").value;t.ba.stash.ap[t.number]={ssid:n,passphase:e,update:!0},t.cb.apply()})),this}}]),n}(h),g=function(t){function n(t){var e;return p(this,n),(e=v(this,y(n).call(this,t))).ids=[\"d_sta_scan\",\"d_sta_scan_now\"],e.cb={back:function(){},apply:function(){}},e.d={},e}return _(n,t),d(n,[{key:\"fetch\",value:function(){var t=this;return new Promise((function(n,e){t.ba.json(\"/api/ap/scan\",{fetch:1}).then((function(){setTimeout((function(){t.ba.json(\"/api/ap/scan\").then((function(e){t.d=e.data,n()})).catch((function(t){e(t)}))}),1e3)})).catch((function(t){e(t)}))}))}},{key:\"show\",value:function(t){var n=this;return this.number=t,this.ba.inner(\"s_sta_scan_num\",new Number(t)+1),this.reset(),this.ba.show(\"d_sta_scan_now\"),this.fetch().then((function(){n.reset().render().events(),n.ba.hide(\"d_sta_scan_now\").show(n.ids[0])})),this}},{key:\"render\",value:function(){var t=\"<tr><th>SSID</th><th>Ch.</th><th>RSSI</th><th>　</th></tr>\";for(var n in this.d.sort((function(t,n){return n.rssi-t.rssi})),this.d){var e=this.d[n];t=t+\"<tr><td>\"+e.ssid+\"</td><td>\"+e.channel+\"</td><td>\"+e.rssi+'dB</td><td><button id=\"t_sta_scan_sel_'+n+'\" class=\"bt_blue\">選択</button></td>'}return this.ba.inner(\"t_sta_scan\",t),this}},{key:\"events\",value:function(){var t=this;for(var n in this.d)!function(n){t.ev.click(\"t_sta_scan_sel_\"+n,(function(e){t.cb.apply(t.d[n].ssid)}))}(n);this.ev.click(\"b_sta_scan_back\",(function(){t.cb.back(t.number)}))}}]),n}(h),O=function(t){function n(t){var e;return p(this,n),(e=v(this,y(n).call(this,t))).ids=[\"d_sta_commit\"],e.cb={apply:function(){}},e.evb=new u(t),e.committable(!1),e}return _(n,t),d(n,[{key:\"committable\",value:function(t){t?this.show_buttons():this.hide_buttons()}},{key:\"show_buttons\",value:function(){var t=this;this.evb.click(\"b_commit\",(function(){t.commit()})),this.ba.show(\"p_commit\")}},{key:\"hide_buttons\",value:function(){this.evb.clear(),this.ba.hide(\"p_commit\")}},{key:\"commit\",value:function(){var t={},n=this.ba.stash.ap;for(var e in n)t[\"ssid\"+e]=n[e].ssid,t[\"passphase\"+e]=n[e].passphase,t[\"update\"+e]=n[e].update?1:0;this.ba.json(\"/api/ap/config\",t),this.show()}},{key:\"show\",value:function(){f(y(n.prototype),\"show\",this).call(this),this.ba.hide(\"p_commit\"),this.cb.apply()}}]),n}(h),j=function(t){function n(t){var e;p(this,n),(e=v(this,y(n).call(this,t))).id=\"m_wifi\",t.stash={ap:[]};var i={list:new w(t),info:new k(t),scan:new g(t),commit:new O(t)},s=function(){e.reset()};return i.list.cb={reset:function(){s()},edit:function(t){i.info.show(t)},committable:function(t){i.commit.committable(t)}},i.info.cb={reset:function(){s()},back:function(){i.list.show()},scan:function(t){i.scan.show(t)},apply:function(){i.list.show()}},i.scan.cb={reset:function(){s()},back:function(t){i.info.show(t)},apply:function(t){i.info.apply(t)}},i.commit.cb={reset:function(){s()},apply:function(){e.leave()}},e.pa=i,e}return _(n,t),d(n,[{key:\"hide\",value:function(){f(y(n.prototype),\"hide\",this).call(this),this.pa.commit.committable(!1)}},{key:\"pages_start\",value:function(){this.pa.list.load()}}]),n}(c);function S(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function P(t,n,e){return n&&S(t.prototype,n),e&&S(t,e),t}function E(t){return(E=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function T(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function x(t,n){return!n||\"object\"!==E(n)&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):n}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,n){return(C=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var I=function(t){function n(t){var e;return T(this,n),(e=x(this,R(n).call(this,t))).id=\"m_index\",e}return function(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&C(t,n)}(n,t),n}(c),F=function(){function t(n){T(this,t),this.ba=n,this.ev=new u(n),this.pa={main:{page:new I(n),btn:\"btc_main\"},wifi:{page:new j(n),btn:\"btc_wifi\"}}}return P(t,[{key:\"change\",value:function(t){for(var n in this.pa)this.pa[n].page.hide();return this.pa[t].page.show(),this}},{key:\"disable_all\",value:function(){for(var t in this.ev.clear(),this.pa)this.ba.disable(this.pa[t].btn);return this}},{key:\"enable_all\",value:function(){for(var t in this.pa)this.enable(t);return this}},{key:\"enable\",value:function(t){var n=this;console.log(\"ENABLE\",t);var e=this.pa[t];return this.ba.enable(e.btn),this.ev.click(e.btn,(function(){n.change(t)})),this}}]),t}(),L=function(){function t(){T(this,t),this.ba=new s(window),this.rp=new F(this.ba)}return P(t,[{key:\"run\",value:function(){this.rp.change(\"main\").enable_all(),this.data_pane()}},{key:\"data_pane\",value:function(){var t=this,n=function(){var n=function(n,e){e=e||\"---\",t.ba.inner(n,e)};t.ba.json(\"/api/ap/info\").then((function(e){var i='<a href=\"http://'+e.hostname+'.local/\">'+e.hostname+\"</a>\",s='<a href=\"http://'+e.ap.ip+'/\">'+e.ap.ip+\"</a>\",o=\"0.0.0.0\"==e.sta.ip?\"---\":e.sta.ip;n(\"dp_hostname\",i),n(\"dp_ap_ssid\",e.ap.ssid),n(\"dp_ap_ip\",s),n(\"dp_sta_ssid\",e.sta.ssid),n(\"dp_sta_ip\",o),t.ba.stash.wifi={hostname:e.hostname,ap:e.ap,sta:e.sta}}))};this.data_pane_timer&&clearInterval(this.data_pane_timer),setInterval(n,1e4),n()}}]),t}();document.addEventListener(\"DOMContentLoaded\",(function(){new s(window).json(\"/api/page\").then((function(t){(t.page=\"index\")&&new L(window).run()}))}))}]);\n// ]]></script></head><body><div class=\"container\"><div class=\"panel_top\"><h1>ESP-WROOM-02 設定</h1></div><div class=\"panel_left\"><div class=\"commit\" id=\"p_commit\"><p>適用ボタンを押すまで<br>反映されません</p><button id=\"b_commit\" class=\"bt_red\">適用</button><hr></div><button class=\"bt_blue\" id=\"btc_main\" disabled=\"disabled\">メインメニュー</button> <button class=\"bt_blue\" id=\"btc_wifi\" disabled=\"disabled\">WiFi設定</button> <button class=\"bt_blue\" id=\"btc_config\" disabled=\"disabled\">動作設定</button><hr><h1>ホスト名</h1><p><span id=\"dp_hostname\">---</span></p><h1>AP SSID</h1><p><span id=\"dp_ap_ssid\">---</span></p><h1>AP IP</h1><p><span id=\"dp_ap_ip\">---</span></p><h1>STA SSID</h1><p><span id=\"dp_sta_ssid\">---</span></p><h1>STA IP</h1><p><span id=\"dp_sta_ip\">---</span></p></div><div class=\"panel_center\"><div class=\"panel_center_inner\"><div id=\"m_index\"><p>毎度ありがとうございます</p></div><div id=\"m_wifi\"><h1>WiFi設定</h1><hr><div id=\"d_sta_list\"><h2>WiFi親機の設定</h2><table><tr><th>SSID<td style=\"text-align:left\"><input type=\"text\" id=\"t_ap_ssid\" size=\"32\" maxlength=\"64\"></td></th></tr><tr><th>パスフレーズ<td style=\"text-align:left\"><input type=\"text\" id=\"t_ap_passphase\" size=\"64\" maxlength=\"64\"></td></th></tr></table><button id=\"b_sta_commit\" class=\"bt_blue\">設定</button><hr><h2>WiFi子機の設定</h2><h3>親機情報</h3><table id=\"t_sta_list\"></table></div><div id=\"d_sta_info\"><h2>WiFi子機の設定</h2><h3>アクセスポイントの設定 → <span id=\"s_sta_info_num\"></span></h3><table><tr><th>SSID<td style=\"text-align:left\"><input type=\"text\" id=\"t_sta_info_ssid\" size=\"32\" maxlength=\"64\"></td></th></tr><tr><th>パスフレーズ<td style=\"text-align:left\"><input type=\"text\" id=\"t_sta_info_passphase\" size=\"64\" maxlength=\"64\"></td></th></tr></table><button id=\"b_sta_info_back\">戻る</button> <button id=\"b_sta_info_scan\" class=\"bt_green\">スキャン</button> <button id=\"b_sta_info_commit\" class=\"bt_blue\">設定</button></div><div id=\"d_sta_scan_now\"><h2>WiFi子機の設定</h2><p>ただいまスキャン中！</p></div><div id=\"d_sta_scan\"><h2>WiFi子機の設定</h2><h3>アクセスポイントの設定 → <span id=\"s_sta_scan_num\"></span></h3><p>電波の強い順番です</p><table id=\"t_sta_scan\"></table><button id=\"b_sta_scan_back\">戻る</button></div><div id=\"d_sta_commit\"><p>設定完了</p><p>親機として接続する場合は、<b>設定したAP SSID</b> に接続し、 <b>AP IP</b>をクリックしてください。 この場合インターネットにアクセスできない場合があります。</p><p>子機として接続する場合は、<b>設定したSTA SSID</b> に接続し、 <b>ホスト名</b>をクリックしてください。 ルータの設定によってはWiFi機器同士の通信をブロックされている場合があります。 その場合はそちらを解除するか、親機としてアクセスしてください。</p><p>左の情報は更新前の情報になっている場合があります。</p></div></div></div></div><div class=\"panel_bottom\"><small>&copy; mamemo technologies.</small></div></div></body></html>");
}
